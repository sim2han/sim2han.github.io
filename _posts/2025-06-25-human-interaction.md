---
layout: post
title: "모바일 디바이스를 사용한 마우스, 터치패드 하이브리드 장치 개발"
description: "게임인터렉티브테크놀로지 프로젝트"
modified: 2025-11-11
tags: [android, rust]
categories: [project]
---


![alt text](/images/posts/mo-ouse/thumbnail.png)

[[github]](https://github.com/sim2han/mo-ouse)

### 요약

Android Studio로 모바일 클라이언트, rust로 PC 서버를 제작하고, 스마트폰의 가속도계로 마우스를 움직일 수 있게 하는 인풋 장치를 개발했다.

### 서론

새로운 입력 디바이스 개발을 주제로, 사용자의 손 동작에 따라 터치패드, 마우스로 동작하는 스마트폰 입력 장치 개발을 진행했다.

사용자가 스마트폰을 마우스 잡듯이 잡으면, 휴대폰은 그것을 인식해 마우스 모드로 바뀌고, 터치패드처럼 드래그한다면 터치패드로 사용된다.

나는 여기서 마우스 모드와 스마트폰, PC간 연결을 맡았다.

## PC와 스마트폰의 연결

![project](/images/posts/mo-ouse/project.png)

모바일 디바이스는 클라이언트, PC는 서버, 둘 사이는 TCP socket 통신으로 연결된다.

클라이언트는 모바일, 터치패드 모드에 따라 자신의 정보를 문자열 형태로 서버에 전송하고, 서버는 문자열을 파싱해 적절한 핸들러를 호출하고, 각 방식으로 마우스의 위치를 갱신한다.

## 가속도계를 입력으로

광마우스는 하단의 센서를 이용해 마우스의 속도를 감지한다. 스마트폰은 이런 방법이 불가능하므로, 가속도계를 사용한다.

![project](/images/posts/mo-ouse/static-accuracy.png)

 위 그림은 static accuracy를 측정하기 위해 휴대폰이 정지된 상태에서 가속도 값을 측정한 결과다. 상단부터 raw 가속도와 가속도를 적분한 속도, 위치 값이다. 테스트 결과, 가속도계는 정지된 상태에서 일정한 수준의 bias와 jitter를 가졌다.
 
 이를 제거하기 위해 calibration을 진행해 노이즈 파라미터를 계산하는 과정을 거친다. 앱이 시작되면 보정을 진행하며, 센서의 평균값, 최대, 최소를 계산한다. 센서 값에서 평균값을 빼서 bias를 제거하고, 최대, 최소 값을 이용해 threshold를 정해서 해당 내의 값을 0으로 처리하는 방식으로 jitter를 제거했다.

 ![dynamic](/images/posts/mo-ouse/dynamic-accuracy.png)

 dynamic accuracy를 측정하기 위해 스마트폰을 좌우로 움직였다. 여기서 큰 문제는 스마트폰의 가속도 누적이 항상 진행 방향과 반대를 향한다는 점이다. 장치를 한쪽 방향으로 스트로크한 경우, 가속 구간보다 감속 구간이 더 큰 영역을 차지해, 속도가 제대로 계산되지 않았다.
 
 ![compare](/images/posts/mo-ouse/compare.png)

 위 그림은 실제 마우스와 움직임을 비교하기 위해, 스마트폰과 마우스를 붙인 상태로 움직인 결과다. 위에서부터 스마트폰 가속도, 속도, 위치, 실제 마우스의 위치, 마우스의 속도다.
 
 이처럼 스마트폰이 좌우로 움직이는 경우, 속도가 제대로 계산되지 않는 것을 볼 수 있다.
 
![mouse](/images/posts/mo-ouse/mouse.png)

 이를 해결하기 위해서 장치가 멈추었다고 판단될 때, 속도를 0으로 초기화하는 방법을 사용한다. 마우스의 가속도와 각속도를 동시에 측정하며, 둘 중 하나가 일정 값 이하로 떨어질 경우 멈춤으로 판단하여 속도를 0으로 초기화한다.

## 마우스 결론

 모바일 마우스의 성능 측정 결과, 마우스와 터치패드 두 경우 모두 실제 입력 장치에 비해 낮은 성능이 나타났다. 실제 마우스의 TP 평균 값은 약 3.3 bit/s, 모바일 디바이스 마우스의 TP 평균 값은 1.06 bit/s로 실제 기기의 약 32%정도의 성능을 보여줬다. 이에 따라 장치가 실제 마우스의 성능에 비해 부족한 이유를 분석해보았다.

 프로젝트에서는 가속도를 적분함에 따라 생기는 오차를 줄이기 위해 장치의 멈춤을 감지해, 초기화하는 방식을 사용했다. 이 방식은 짧고 큰 움직임일 경우 잘 작동했지만, 마우스의 조작 시간이 길어질 경우, 사용자가 감당할 수 없는 노이즈가 누적되는 문제가 있다.

 마우스를 포인팅하는 과정은 커서를 타겟 주변으로 보내는 Ballistic과 정밀하게 타게팅하는 Corrective과정으로 나뉜다. 내부 테스트를 거칠 때는 사용자가 이미 장치에 익숙한 상태였기 때문에 짧은 Correction 과정을 통해 테스트를 진행할 수 있었다. 하지만 장치를 처음 사용하는 피실험자는 Ballistic과정에 비해 Correction에 더 많은 시간을 할애하는 경향이 있었다. 이는 시간이 지남에 따라 오차가 누적되는 장치의 특성과 역시너지를 내어 실험을 어렵게 만드는데 영향을 주었다.

 특히, 마우스를 이용할 때 노이즈에 큰 영향을 받지 않으려면 마우스를 빠르게 움직이도록 하여 큰 가속도 값을 만드는 것이 유리하나, correction 과정에서는 마우스가 느려질 가능성이 매우 높기 때문에 실험 참가자들이 correction 과정에서 더 어려움을 느끼는 것을 실험 모습 관찰을 통해 확인했다.
 
 또한 장치 측면에서 장치 사용에 따라 항상 진행 방향의 반대 방향으로 노이즈가 누적되는 현상이 발생했다. 이는 스마트폰의 가속도계가 가속할 때의 값보다 감속할 때의 값을 더 크게 측정하는 부분에서 발생한다. 제작 과정에서 이를 해결하기 위해 여러 시도를 했지만, 역방향 가속도와 실제 역방향 움직임을 구분하는 것에 문제가 있어 실현하지 못했다. 따라서 가속도계 내에서 이 문제에 대한 해결이 어렵다고 보고, 추후 카메라, 자이로 센서등의 다른 센서와 퓨전하여 접근하는 방식이 필요할 것으로 생각한다.

